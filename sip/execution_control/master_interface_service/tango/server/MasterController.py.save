# -*- coding: utf-8 -*-
#
# This file is part of the MasterController project
#
#
#
# Distributed under the terms of the GPL license.
# See LICENSE.txt for more info.

""" 

SKA SDP Master Controller prototype
"""

# PyTango imports
import PyTango
from PyTango import DebugIt
from PyTango.server import run
from PyTango.server import Device, DeviceMeta
from PyTango.server import attribute, command
from PyTango import AttrQuality, DispLevel, DevState
from PyTango import AttrWriteType, PipeWriteType
from SKADevice import SKADevice
# Additional import

__all__ = ["MasterController", "main"]


class MasterController(SKADevice,metaclass=DeviceMeta):
    """
    SKA SDP Master Controller prototype
    """
    _targetState = 'OFF'

    # ----------
    # Attributes
    # ----------












    # ---------------
    # General methods
    # ---------------

    def init_device(self):
        SKADevice.init_device(self)
        self.debug_stream("In init_device()")

    def always_executed_hook(self):
        pass

    def delete_device(self):
        pass

    # ------------------
    # Attributes methods
    # ------------------


    # --------
    # Commands
    # --------

    @command(
    dtype_in='DevString', 
    )
    @DebugIt()
    def SetMCTargetState(self, requested_state):
        self.debug_stream("In SetMCTargetState()")
        states = ['OFF', 'STANDBY', 'ON', 'DISABLE']

        if requested_state not in states:
            PyTango.Except.throw_exception("PyTango.DevFailed",\
                "NOTVALID",\
                requested_state + " is not a valid target state")
 

        pass

# ----------
# Run server
# ----------


def main(args=None, **kwargs):
    return run((MasterController,), args=args, **kwargs)

if __name__ == '__main__':
    main()
